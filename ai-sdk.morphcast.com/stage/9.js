(window.webpackJsonpCY=window.webpackJsonpCY||[]).push([[9],{252:function(e,t,n){var r={"./network/graph_webassembly.json":253};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=252},253:function(e,t,n){e.exports=n.p+"2f116836374d59ad0738a9c414e43a39.json"},254:function(e,t,n){var r={"./network/graph_webgl_16384.json":255};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=254},255:function(e,t,n){e.exports=n.p+"d2f5a79769c233d60e3ef534252afb5b.json"},256:function(e,t,n){var r={"./network/graph_webgl_4096.json":257};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=256},257:function(e,t,n){e.exports=n.p+"859e4037b186dc49cbc719bcd62889ff.json"},258:function(e,t,n){var r={"./network/graph_webgl_8192.json":259};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=258},259:function(e,t,n){e.exports=n.p+"960195ecb2c1da97025ba49f588bc64c.json"},260:function(e,t,n){var r={"./network/graph_webgpu.json":261};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=260},261:function(e,t,n){e.exports=n.p+"fd344f5d8e70136b0a28e2f136b3fc0f.json"},262:function(e,t,n){var r={"./network/kernels_asmjs.js":263};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=262},263:function(e,t,n){e.exports=n.p+"d92f442ef46bfbd7e671187c4bd52704.js"},264:function(e,t,n){var r={"./network/kernels_asmjs.js.mem":265};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=264},265:function(e,t,n){e.exports=n.p+"576fa6376093a9e12b09e1d5769bda5f.mem"},266:function(e,t,n){var r={"./network/kernels_webassembly.js":267};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=266},267:function(e,t,n){e.exports=n.p+"eca89da0b59371b8d1504616260ef897.js"},268:function(e,t,n){var r={"./network/kernels_webassembly.wasm":269};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=268},269:function(e,t,n){e.exports=n.p+"84b85d9e79acd98f97d7316f12bc6a36.wasm"},270:function(e,t,n){var r={"./network/kernels_webgpu.metal":271};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=270},271:function(e,t,n){e.exports=n.p+"db15ee5307992ecb8f0012896e9b4089.metal"},272:function(e,t,n){var r={"./network/weight_webassembly.bin":273};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=272},273:function(e,t,n){e.exports=n.p+"3477f5f88da6e28e0dc46b0e22d7ebd4.bin"},274:function(e,t,n){var r={"./network/weight_webgl_16384.bin":275};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=274},275:function(e,t,n){e.exports=n.p+"3477f5f88da6e28e0dc46b0e22d7ebd4.bin"},276:function(e,t,n){var r={"./network/weight_webgl_4096.bin":277};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=276},277:function(e,t,n){e.exports=n.p+"3477f5f88da6e28e0dc46b0e22d7ebd4.bin"},278:function(e,t,n){var r={"./network/weight_webgl_8192.bin":279};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=278},279:function(e,t,n){e.exports=n.p+"3477f5f88da6e28e0dc46b0e22d7ebd4.bin"},280:function(e,t,n){var r={"./network/weight_webgpu.bin":281};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=280},281:function(e,t,n){e.exports=n.p+"b4af43af250e3a8e953a51037acdc2b5.bin"},46:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),s=n(1),i=n.n(s),a=n(8),u=n.n(a),c=n(9),f=n.n(c),l=n(5),h=n.n(l),_=n(54),p=n(56),d=n(58),m=n(51),v=n(4);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var b=[{key:"gender",labels:["Female","Male"]}],g={input_width:48,input_height:48,order:_.Image.Order.HWC,colorspace:_.Image.Color.RGB,bias:[127.5,127.5,127.5],scale:[127.5,127.5,127.5],task:["classification"],threshold:NaN},y="./network/",k={"graph_webassembly.json":n(252)(y+"graph_webassembly.json"),"graph_webgl_16384.json":n(254)(y+"graph_webgl_16384.json"),"graph_webgl_4096.json":n(256)(y+"graph_webgl_4096.json"),"graph_webgl_8192.json":n(258)(y+"graph_webgl_8192.json"),"graph_webgpu.json":n(260)(y+"graph_webgpu.json"),"kernels_asmjs.js":n(262)(y+"kernels_asmjs.js"),"kernels_asmjs.js.mem":n(264)(y+"kernels_asmjs.js.mem"),"kernels_webassembly.js":n(266)(y+"kernels_webassembly.js"),"kernels_webassembly.wasm":n(268)(y+"kernels_webassembly.wasm"),"kernels_webgpu.metal":n(270)(y+"kernels_webgpu.metal"),"weight_webassembly.bin":n(272)(y+"weight_webassembly.bin"),"weight_webgl_16384.bin":n(274)(y+"weight_webgl_16384.bin"),"weight_webgl_4096.bin":n(276)(y+"weight_webgl_4096.bin"),"weight_webgl_8192.bin":n(278)(y+"weight_webgl_8192.bin"),"weight_webgpu.bin":n(280)(y+"weight_webgpu.bin")};var O=function(e){u()(n,e);var t=w(n);function n(e){var r,s,i;return o()(this,n),(i=t.call(this,b,g,k,y,e)).setSmoothness(null!==(r=e.conf.smoothness)&&void 0!==r?r:.95),i.setThreshold(null!==(s=e.conf.threshold)&&void 0!==s?s:.7),i}return i()(n,[{key:"setSmoothness",value:function(e){var t=1-e;this._lerp=new d.d(2,{type:d.b.EMA,alphaAt10Fps:t})}},{key:"setThreshold",value:function(e){this._cutoffThreshold=e}},{key:"_getMostConfident",value:function(e){var t,n=(t=e,Object.keys(t).reduce((function(e,n){return t[e]>t[n]?e:n})));if(e[n]>this._cutoffThreshold)return n}},{key:"_cutoff",value:function(e){if(e<1-this._cutoffThreshold||e>this._cutoffThreshold)return e}},{key:"_minRestTimeProcess",value:function(e){var t=this,n=e.allData,r=e.frameTimestamp,o=Object(m.a)({allData:n},"face_base",v.d).output;return this.runTheNetwork(o).then((function(e){var n=t.getResultFromNetworkOutput(e).gender,o=[n.Female,n.Male],s=t._lerp.next(o,r),i={Female:t._cutoff(s[0]),Male:t._cutoff(s[1])};return{type:"face_gender",output:{gender:i,mostConfident:t._getMostConfident(i)}}}))}}]),n}(p.a);t.default=O},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4);function o(e,t){var n=e.allData,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.d,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!0},a=n.find((function(e){return e.type===t}));if(a){var u=s(a);if(null!=u&&i(a,u))return u}throw o}},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=n.n(r),s=n(1),i=n.n(s),a=function(){function e(t,n){o()(this,e),this._minRestTime=t,this._lastDoneTime=0,this._canSchedule=!0,this._busyReject=n}return i()(e,[{key:"remainingMs",value:function(){return Math.max(0,this._minRestTime-(Date.now()-this._lastDoneTime))}},{key:"canSchedule",value:function(){return this._canSchedule&&0===this.remainingMs()}},{key:"scheduleNext",value:function(e){var t=this;return this.canSchedule()?(this._canSchedule=!1,Promise.resolve(e()).then((function(e){return t.processDone(),e})).catch((function(e){throw t.processDone(),e}))):Promise.reject(this._busyReject)}},{key:"processDone",value:function(){this._canSchedule=!0,this._lastDoneTime=Date.now()}}]),e}()},53:function(e,t,n){var r=n(57);function o(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=o=Reflect.get,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,n){var o=r(e,t);if(o){var s=Object.getOwnPropertyDescriptor(o,t);return s.get?s.get.call(arguments.length<3?e:n):s.value}},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(this,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=n.n(r),s=n(1),i=n.n(s),a=function(){function e(t){o()(this,e),this._lastTimestamp=null,this._reject=t}return i()(e,[{key:"push",value:function(e){if(null===this._lastTimestamp)this._lastTimestamp=e;else{if(this._lastTimestamp>e)return Promise.reject(this._reject);this._lastTimestamp=e}}}]),e}()},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),o=n.n(r),s=n(1),i=n.n(s),a=n(4),u=n(52),c=n(54),f=n(55),l=function(){function e(t,n,r,s,i){o()(this,e);var c=i.minRestTime,l=i.conf;this._minRestTimeHelper=new u.a(c,a.a),this._frameSequenceChecker=new f.a(a.c),this._labels=t,this._config_params=n,this._networkBasePath=s,this._load_options=l,this._load_options.cacheStrategy="networkOnly",this._load_options.transformUrlDelegate||(this._load_options.transformUrlDelegate=function(e){var t=e.split("/"),n=t[t.length-1];return r[n]})}return i()(e,[{key:"load",value:function(){var e=this;return this._canvas=document.createElement("canvas"),c.load(this._networkBasePath,this._load_options).then((function(t){e._runner=t}))}},{key:"process",value:function(e){var t=this;return this._minRestTimeHelper.scheduleNext((function(){return Promise.resolve().then((function(){return t._frameSequenceChecker.push(e.frameTimestamp)})).then((function(){return t._minRestTimeProcess(e)}))}))}},{key:"_minRestTimeProcess",value:function(){throw"You must implement _minRestTimeProcess"}},{key:"processImageData",value:function(e){return this._drawToCanvas(this._canvas,e),c.Image.getImageArray(this._canvas,{dstW:this._config_params.input_width,dstH:this._config_params.input_height,order:this._config_params.order,color:this._config_params.colorspace,bias:this._config_params.bias,scale:this._config_params.scale}).then((function(e){return e}))}},{key:"_drawToCanvas",value:function(e,t){e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t,0,0)}},{key:"runTheNetwork",value:function(e){var t=this;return this._runner.getInputViews()[0].set(e),this._runner.run().then((function(){return t.getNetworkOutput()}))}},{key:"getNetworkOutput",value:function(){var e=this._runner.getOutputViews(),t=[];return e.forEach((function(e){t.push(e.toActual())})),t}},{key:"getResultFromNetworkOutput",value:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n],o={};if(this._labels[n].labels)for(var s=0;s<r.length;++s)o[this._labels[n].labels[s]]=r[s];else o=r;t[this._labels[n].key]=o}return t}},{key:"terminate",value:function(){}}]),e}()},57:function(e,t,n){var r=n(5);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return j}));var r=n(53),o=n.n(r),s=n(8),i=n.n(s),a=n(9),u=n.n(a),c=n(5),f=n.n(c),l=n(0),h=n.n(l),_=n(1),p=n.n(_);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u()(this,n)}}var m=function(){function e(t){if(h()(this,e),!t||t<0||t>1)throw new TypeError("Bad or more arguments needed");this._alphaAt10Fps=t,this._lastTimestampMs=null}return p()(e,[{key:"alphaAt10Fps",get:function(){return this._alphaAt10Fps}},{key:"lastTimestampMs",get:function(){return this._lastTimestampMs}},{key:"update",value:function(t){var n,r=t-this._lastTimestampMs;if(null===this._lastTimestampMs||r>=e.MAX_PERIOD_ALLOWED_MS)n=1;else{if(r<0||isNaN(t))throw new TypeError("Missing or bad timestamp during push (not an integer or antecedent to the one stored). Stored timestamp: "+this._lastTimestampMs+", pushed: "+t);n=e._computeAlpha(this._alphaAt10Fps,r)}return this._lastTimestampMs=t,n}}],[{key:"MAX_PERIOD_ALLOWED_MS",get:function(){return 1e3}},{key:"_computeAlpha",value:function(e,t){var n=t/1e3,r=Math.pow(1-e,10);return 1-Math.pow(r,n)}}]),e}(),v=p()((function e(t,n){var r=this;if(h()(this,e),(this instanceof e?this.constructor:void 0)===t||(this instanceof e?this.constructor:void 0)===e)throw new TypeError("Cannot construct abstract instances directly");n.forEach((function(e){if("function"!=typeof r[e])throw new TypeError("Must override method "+e)}))})),w=function(e){i()(n,e);var t=d(n);function n(){return h()(this,n),t.call(this,n,["push"])}return p()(n)}(v),b=function(e){i()(n,e);var t=d(n);function n(){var e;return h()(this,n),(e=t.call(this))._lastValue=null,e}return p()(n,[{key:"value",get:function(){return this._lastValue}},{key:"push",value:function(e){this._lastValue=e}}]),n}(w),g=function(e){i()(n,e);var t=d(n);function n(){var e;return h()(this,n),(e=t.call(this))._lastEma=null,e}return p()(n,[{key:"ema",get:function(){return this._lastEma}},{key:"push",value:function(e,t){if(null===this._lastEma)this._lastEma=e;else{if(isNaN(t))throw TypeError("Bad or missing alpha argument.");this._lastEma=(1-t)*this._lastEma+t*e}}}]),n}(w),y=function(e){i()(n,e);var t=d(n);function n(){var e;return h()(this,n),(e=t.call(this))._lastEmvar=null,e}return p()(n,[{key:"emvar",get:function(){return this._lastEmvar}},{key:"push",value:function(e,t){var r=e-this.ema;return o()(f()(n.prototype),"push",this).call(this,e,t),null===this._lastEmvar?(this._lastEmvar=0,this._lastEmvar):(this._lastEmvar=(1-t)*(this._lastEmvar+t*Math.pow(r,2)),this._lastEmvar)}}]),n}(g),k=function(e){i()(n,e);var t=d(n);function n(){return h()(this,n),t.call(this,n,["next"])}return p()(n)}(v),O={EMA:Symbol("ema"),EMVAR:Symbol("emvar"),NONE:Symbol("none")},E=function(e){i()(n,e);var t=d(n);function n(e){var r,o=e.type,s=void 0===o?O.EMVAR:o,i=e.alphaAt10Fps;switch(h()(this,n),r=t.call(this),s){case O.EMA:case O.EMVAR:r._processor=new y,r._alphaCalculator=new m(i);break;case O.NONE:r._processor=new b,r._alphaCalculator={update:function(){return null}};break;default:throw new TypeError("Not implemented")}return r._type=s,r}return p()(n,[{key:"next",value:function(e,t){var n=this._alphaCalculator.update(t);switch(this._processor.push(e,n),this._type){case O.EMVAR:return this._processor.emvar;case O.EMA:return this._processor.ema;case O.NONE:return this._processor.value}}},{key:"statistics",get:function(){return this._processor}}]),n}(k),j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:O.NONE};h()(this,e),this._filters=new Array(t);for(var r=0;r<t;r++)this._filters[r]=new E(n)}return p()(e,[{key:"next",value:function(e,t){if(e.length!==this._filters.length)throw new TypeError("Wrong length of array in input.");return this._filters.map((function(n,r){return n.next(e[r],t)}))}}]),e}()}}]);