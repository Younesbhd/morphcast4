(window.webpackJsonpCY=window.webpackJsonpCY||[]).push([[5],{222:function(e,t,n){var r={"./network/graph_webassembly.json":223};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=222},223:function(e,t,n){e.exports=n.p+"a163a6b98ab7910c64797326db71e8fd.json"},224:function(e,t,n){var r={"./network/graph_webgl_16384.json":225};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=224},225:function(e,t,n){e.exports=n.p+"92d4b49c37d8d9e3e0f9c35bd9b7ab34.json"},226:function(e,t,n){var r={"./network/graph_webgl_4096.json":227};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=226},227:function(e,t,n){e.exports=n.p+"c203740006c8df3df80a1e6b474bf2d2.json"},228:function(e,t,n){var r={"./network/graph_webgl_8192.json":229};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=228},229:function(e,t,n){e.exports=n.p+"62e93f20f5d528d598789c855dc95028.json"},230:function(e,t,n){var r={"./network/graph_webgpu.json":231};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=230},231:function(e,t,n){e.exports=n.p+"1f5038928b08a0a53ae6b7ec92efb810.json"},232:function(e,t,n){var r={"./network/kernels_asmjs.js":233};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=232},233:function(e,t,n){e.exports=n.p+"e926ad4ca3b93870f83b683b194ac835.js"},234:function(e,t,n){var r={"./network/kernels_asmjs.js.mem":235};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=234},235:function(e,t,n){e.exports=n.p+"2ea5082de6a75c4a406eaf489262f7a2.mem"},236:function(e,t,n){var r={"./network/kernels_webassembly.js":237};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=236},237:function(e,t,n){e.exports=n.p+"3702af9d454f3ef5581ade8db809a603.js"},238:function(e,t,n){var r={"./network/kernels_webassembly.wasm":239};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=238},239:function(e,t,n){e.exports=n.p+"764c94de9163d79c576bfae6447d3c05.wasm"},240:function(e,t,n){var r={"./network/kernels_webgpu.metal":241};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=240},241:function(e,t,n){e.exports=n.p+"7b521cdd48f425f8285e1063438d7692.metal"},242:function(e,t,n){var r={"./network/weight_webassembly.bin":243};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=242},243:function(e,t,n){e.exports=n.p+"f791b62bc2c2de1e4c8060dabd3d7c34.bin"},244:function(e,t,n){var r={"./network/weight_webgl_16384.bin":245};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=244},245:function(e,t,n){e.exports=n.p+"f791b62bc2c2de1e4c8060dabd3d7c34.bin"},246:function(e,t,n){var r={"./network/weight_webgl_4096.bin":247};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=246},247:function(e,t,n){e.exports=n.p+"f791b62bc2c2de1e4c8060dabd3d7c34.bin"},248:function(e,t,n){var r={"./network/weight_webgl_8192.bin":249};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=248},249:function(e,t,n){e.exports=n.p+"f791b62bc2c2de1e4c8060dabd3d7c34.bin"},250:function(e,t,n){var r={"./network/weight_webgpu.bin":251};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=250},251:function(e,t,n){e.exports=n.p+"9b51e79003a5b8067f83d809db91dffe.bin"},45:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),s=n.n(i),a=n(8),u=n.n(a),c=n(9),l=n.n(c),f=n(5),h=n.n(f),p=n(54),_=n(56),d=n(58),v=n(60),m=n(51),w=n(4);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var y=[{key:"features",labels:["Arched Eyebrows","Attractive","Bags Under Eyes","Bald","Bangs","Beard 5 O'Clock Shadow","Big Lips","Big Nose","Black Hair","Blond Hair","Brown Hair","Chubby","Double Chin","Earrings","Eyebrows Bushy","Eyeglasses","Goatee","Gray Hair","Hat","Heavy Makeup","High Cheekbones","Lipstick","Mouth Slightly Open","Mustache","Narrow Eyes","Necklace","Necktie","No Beard","Oval Face","Pale Skin","Pointy Nose","Receding Hairline","Rosy Cheeks","Sideburns","Straight Hair","Wavy Hair"]}],g={input_width:48,input_height:48,order:p.Image.Order.HWC,colorspace:p.Image.Color.RGB,bias:[127.5,127.5,127.5],scale:[127.5,127.5,127.5],task:["classification_multilabel"],threshold:NaN},k="./network/",O={"graph_webassembly.json":n(222)(k+"graph_webassembly.json"),"graph_webgl_16384.json":n(224)(k+"graph_webgl_16384.json"),"graph_webgl_4096.json":n(226)(k+"graph_webgl_4096.json"),"graph_webgl_8192.json":n(228)(k+"graph_webgl_8192.json"),"graph_webgpu.json":n(230)(k+"graph_webgpu.json"),"kernels_asmjs.js":n(232)(k+"kernels_asmjs.js"),"kernels_asmjs.js.mem":n(234)(k+"kernels_asmjs.js.mem"),"kernels_webassembly.js":n(236)(k+"kernels_webassembly.js"),"kernels_webassembly.wasm":n(238)(k+"kernels_webassembly.wasm"),"kernels_webgpu.metal":n(240)(k+"kernels_webgpu.metal"),"weight_webassembly.bin":n(242)(k+"weight_webassembly.bin"),"weight_webgl_16384.bin":n(244)(k+"weight_webgl_16384.bin"),"weight_webgl_4096.bin":n(246)(k+"weight_webgl_4096.bin"),"weight_webgl_8192.bin":n(248)(k+"weight_webgl_8192.bin"),"weight_webgpu.bin":n(250)(k+"weight_webgpu.bin")},E=function(e){u()(n,e);var t=b(n);function n(e){var r,i;return o()(this,n),(i=t.call(this,y,g,O,k,e))._featureLabels=y[0].labels,i._clipFilterMap={},i._featureLabels.forEach((function(e){return i._clipFilterMap[e]=new v.a({boundAt10Fps:.07,windowLength:3})})),i.setSmoothness(null!==(r=e.conf.smoothness)&&void 0!==r?r:.9),i}return s()(n,[{key:"setSmoothness",value:function(e){var t=this;this._useTimeFilters=0!==e;var n=1-e;this._lerpFilterMap={},this._featureLabels.forEach((function(e){return t._lerpFilterMap[e]=new d.c({type:d.b.EMA,alphaAt10Fps:n})}))}},{key:"_minRestTimeProcess",value:function(e){var t=this,n=e.allData,r=e.frameTimestamp,o=Object(m.a)({allData:n},"face_base",w.d).output;return this.runTheNetwork(o).then((function(e){var n=t.getResultFromNetworkOutput(e).features,o={},i={};return Object.keys(n).forEach((function(e){t._useTimeFilters?i[e]=t._clipFilterMap[e].next(n[e],r):i[e]=n[e],o[e]=t._lerpFilterMap[e].next(i[e],r)})),{type:"face_features",output:{features:o}}}))}}]),n}(_.a);t.default=E},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4);function o(e,t){var n=e.allData,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.d,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!0},a=n.find((function(e){return e.type===t}));if(a){var u=i(a);if(null!=u&&s(a,u))return u}throw o}},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=n.n(r),i=n(1),s=n.n(i),a=function(){function e(t,n){o()(this,e),this._minRestTime=t,this._lastDoneTime=0,this._canSchedule=!0,this._busyReject=n}return s()(e,[{key:"remainingMs",value:function(){return Math.max(0,this._minRestTime-(Date.now()-this._lastDoneTime))}},{key:"canSchedule",value:function(){return this._canSchedule&&0===this.remainingMs()}},{key:"scheduleNext",value:function(e){var t=this;return this.canSchedule()?(this._canSchedule=!1,Promise.resolve(e()).then((function(e){return t.processDone(),e})).catch((function(e){throw t.processDone(),e}))):Promise.reject(this._busyReject)}},{key:"processDone",value:function(){this._canSchedule=!0,this._lastDoneTime=Date.now()}}]),e}()},53:function(e,t,n){var r=n(57);function o(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=o=Reflect.get,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,n){var o=r(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(this,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=n.n(r),i=n(1),s=n.n(i),a=function(){function e(t){o()(this,e),this._lastTimestamp=null,this._reject=t}return s()(e,[{key:"push",value:function(e){if(null===this._lastTimestamp)this._lastTimestamp=e;else{if(this._lastTimestamp>e)return Promise.reject(this._reject);this._lastTimestamp=e}}}]),e}()},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),o=n.n(r),i=n(1),s=n.n(i),a=n(4),u=n(52),c=n(54),l=n(55),f=function(){function e(t,n,r,i,s){o()(this,e);var c=s.minRestTime,f=s.conf;this._minRestTimeHelper=new u.a(c,a.a),this._frameSequenceChecker=new l.a(a.c),this._labels=t,this._config_params=n,this._networkBasePath=i,this._load_options=f,this._load_options.cacheStrategy="networkOnly",this._load_options.transformUrlDelegate||(this._load_options.transformUrlDelegate=function(e){var t=e.split("/"),n=t[t.length-1];return r[n]})}return s()(e,[{key:"load",value:function(){var e=this;return this._canvas=document.createElement("canvas"),c.load(this._networkBasePath,this._load_options).then((function(t){e._runner=t}))}},{key:"process",value:function(e){var t=this;return this._minRestTimeHelper.scheduleNext((function(){return Promise.resolve().then((function(){return t._frameSequenceChecker.push(e.frameTimestamp)})).then((function(){return t._minRestTimeProcess(e)}))}))}},{key:"_minRestTimeProcess",value:function(){throw"You must implement _minRestTimeProcess"}},{key:"processImageData",value:function(e){return this._drawToCanvas(this._canvas,e),c.Image.getImageArray(this._canvas,{dstW:this._config_params.input_width,dstH:this._config_params.input_height,order:this._config_params.order,color:this._config_params.colorspace,bias:this._config_params.bias,scale:this._config_params.scale}).then((function(e){return e}))}},{key:"_drawToCanvas",value:function(e,t){e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t,0,0)}},{key:"runTheNetwork",value:function(e){var t=this;return this._runner.getInputViews()[0].set(e),this._runner.run().then((function(){return t.getNetworkOutput()}))}},{key:"getNetworkOutput",value:function(){var e=this._runner.getOutputViews(),t=[];return e.forEach((function(e){t.push(e.toActual())})),t}},{key:"getResultFromNetworkOutput",value:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n],o={};if(this._labels[n].labels)for(var i=0;i<r.length;++i)o[this._labels[n].labels[i]]=r[i];else o=r;t[this._labels[n].key]=o}return t}},{key:"terminate",value:function(){}}]),e}()},57:function(e,t,n){var r=n(5);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return x}));var r=n(53),o=n.n(r),i=n(8),s=n.n(i),a=n(9),u=n.n(a),c=n(5),l=n.n(c),f=n(0),h=n.n(f),p=n(1),_=n.n(p);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var o=l()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u()(this,n)}}var v=function(){function e(t){if(h()(this,e),!t||t<0||t>1)throw new TypeError("Bad or more arguments needed");this._alphaAt10Fps=t,this._lastTimestampMs=null}return _()(e,[{key:"alphaAt10Fps",get:function(){return this._alphaAt10Fps}},{key:"lastTimestampMs",get:function(){return this._lastTimestampMs}},{key:"update",value:function(t){var n,r=t-this._lastTimestampMs;if(null===this._lastTimestampMs||r>=e.MAX_PERIOD_ALLOWED_MS)n=1;else{if(r<0||isNaN(t))throw new TypeError("Missing or bad timestamp during push (not an integer or antecedent to the one stored). Stored timestamp: "+this._lastTimestampMs+", pushed: "+t);n=e._computeAlpha(this._alphaAt10Fps,r)}return this._lastTimestampMs=t,n}}],[{key:"MAX_PERIOD_ALLOWED_MS",get:function(){return 1e3}},{key:"_computeAlpha",value:function(e,t){var n=t/1e3,r=Math.pow(1-e,10);return 1-Math.pow(r,n)}}]),e}(),m=_()((function e(t,n){var r=this;if(h()(this,e),(this instanceof e?this.constructor:void 0)===t||(this instanceof e?this.constructor:void 0)===e)throw new TypeError("Cannot construct abstract instances directly");n.forEach((function(e){if("function"!=typeof r[e])throw new TypeError("Must override method "+e)}))})),w=function(e){s()(n,e);var t=d(n);function n(){return h()(this,n),t.call(this,n,["push"])}return _()(n)}(m),b=function(e){s()(n,e);var t=d(n);function n(){var e;return h()(this,n),(e=t.call(this))._lastValue=null,e}return _()(n,[{key:"value",get:function(){return this._lastValue}},{key:"push",value:function(e){this._lastValue=e}}]),n}(w),y=function(e){s()(n,e);var t=d(n);function n(){var e;return h()(this,n),(e=t.call(this))._lastEma=null,e}return _()(n,[{key:"ema",get:function(){return this._lastEma}},{key:"push",value:function(e,t){if(null===this._lastEma)this._lastEma=e;else{if(isNaN(t))throw TypeError("Bad or missing alpha argument.");this._lastEma=(1-t)*this._lastEma+t*e}}}]),n}(w),g=function(e){s()(n,e);var t=d(n);function n(){var e;return h()(this,n),(e=t.call(this))._lastEmvar=null,e}return _()(n,[{key:"emvar",get:function(){return this._lastEmvar}},{key:"push",value:function(e,t){var r=e-this.ema;return o()(l()(n.prototype),"push",this).call(this,e,t),null===this._lastEmvar?(this._lastEmvar=0,this._lastEmvar):(this._lastEmvar=(1-t)*(this._lastEmvar+t*Math.pow(r,2)),this._lastEmvar)}}]),n}(y),k=function(e){s()(n,e);var t=d(n);function n(){return h()(this,n),t.call(this,n,["next"])}return _()(n)}(m),O={EMA:Symbol("ema"),EMVAR:Symbol("emvar"),NONE:Symbol("none")},E=function(e){s()(n,e);var t=d(n);function n(e){var r,o=e.type,i=void 0===o?O.EMVAR:o,s=e.alphaAt10Fps;switch(h()(this,n),r=t.call(this),i){case O.EMA:case O.EMVAR:r._processor=new g,r._alphaCalculator=new v(s);break;case O.NONE:r._processor=new b,r._alphaCalculator={update:function(){return null}};break;default:throw new TypeError("Not implemented")}return r._type=i,r}return _()(n,[{key:"next",value:function(e,t){var n=this._alphaCalculator.update(t);switch(this._processor.push(e,n),this._type){case O.EMVAR:return this._processor.emvar;case O.EMA:return this._processor.ema;case O.NONE:return this._processor.value}}},{key:"statistics",get:function(){return this._processor}}]),n}(k),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:O.NONE};h()(this,e),this._filters=new Array(t);for(var r=0;r<t;r++)this._filters[r]=new E(n)}return _()(e,[{key:"next",value:function(e,t){if(e.length!==this._filters.length)throw new TypeError("Wrong length of array in input.");return this._filters.map((function(n,r){return n.next(e[r],t)}))}}]),e}()},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(8),o=n.n(r),i=n(9),s=n.n(i),a=n(5),u=n.n(a),c=n(0),l=n.n(c),f=n(1),h=n.n(f);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u()(e);if(t){var o=u()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s()(this,n)}}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=d(e),r=e.map((function(e){var t=e-n;return t*t})),o=r.reduce((function(e,t){return e+t}),0);return o/=r.length-t,Math.sqrt(o)}function d(e){return e.reduce((function(e,t){return e+t}),0)/e.length}var v=function(e){o()(n,e);var t=p(n);function n(){return l()(this,n),t.apply(this,arguments)}return h()(n,[{key:"avg",value:function(){if(0===this.length)throw new TypeError("Window is empty. Cannot compute average.");return d(this._queue)}},{key:"stddev",value:function(){if(0===this.length)throw new TypeError("Window is empty. Cannot compute standard deviation.");return _(this._queue)}},{key:"sample_stddev",value:function(){if(0===this.length)throw new TypeError("Window is empty. Cannot compute standard deviation.");if(1===this.length)throw new RangeError("Cannot estimate sample standard deviation for only one value.");return _(this._queue,1)}}]),n}(function(){function e(t){if(l()(this,e),!Number.isInteger(t)||t<1)throw new RangeError("Maximum window size must be an integer greater than zero.");this._maxLen=t,this._queue=[]}return h()(e,[{key:"enqueue",value:function(e){if(this._queue.unshift(e),this._queue.length>this._maxLen)return this._queue.pop()}},{key:"length",get:function(){return this._queue.length}}]),e}())},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(0),o=n.n(r),i=n(1),s=n.n(i),a=n(53),u=n.n(a),c=n(8),l=n.n(c),f=n(9),h=n.n(f),p=n(5),_=n.n(p);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var o=_()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var v=function(e){l()(n,e);var t=d(n);function n(e){var r,i=e.windowLength,s=void 0===i?3:i;return o()(this,n),(r=t.call(this,s))._maxWindowLength=s,r}return s()(n,[{key:"push",value:function(e,t){var r;return r=this._isWindowFull()?n._clippingValue(e,this.avg(),t):e,u()(_()(n.prototype),"enqueue",this).call(this,r),r}},{key:"_isWindowFull",value:function(){return u()(_()(n.prototype),"length",this)>=this._maxWindowLength}}],[{key:"_clippingValue",value:function(e,t,n){var r=t-n,o=t+n;return Math.min(Math.max(e,r),o)}}]),n}(n(59).a),m=function(){function e(t){o()(this,e),this.boundAt10Fps=t,this.lastTimestampMs=null}return s()(e,[{key:"update",value:function(e){var t,n=e-this.lastTimestampMs;if(null===this.lastTimestampMs)t=this.boundAt10Fps;else{if(n<0||isNaN(e))throw new TypeError("Missing or bad timestamp during push (not an integer or antecedent to the one stored). Stored timestamp: "+this.lastTimestampMs+", pushed: "+e);t=this.boundAt10Fps*n/100}return this.lastTimestampMs=e,t}}]),e}(),w=function(){function e(t){var n=t.boundAt10Fps,r=t.windowLength;o()(this,e),this._clippingFilter=new v({windowLength:r}),this._boundCalculator=new m(n)}return s()(e,[{key:"next",value:function(e,t){var n=this._boundCalculator.update(t);return this._clippingFilter.push(e,n)}}]),e}()}}]);