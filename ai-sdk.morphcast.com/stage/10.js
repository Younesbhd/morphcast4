(window.webpackJsonpCY=window.webpackJsonpCY||[]).push([[10],{130:function(e,n,t){var r={"./network/graph_webassembly.json":131};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=130},131:function(e,n,t){e.exports=t.p+"7aaff06ad14474790402d97c85fa5f99.json"},132:function(e,n,t){var r={"./network/graph_webgl_16384.json":133};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=132},133:function(e,n,t){e.exports=t.p+"6dc7c74acbbcfaa9c44a5a3d9dcfd6a0.json"},134:function(e,n,t){var r={"./network/graph_webgl_4096.json":135};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=134},135:function(e,n,t){e.exports=t.p+"5323ae4282d12e8a3eca52ab6ee29ebd.json"},136:function(e,n,t){var r={"./network/graph_webgl_8192.json":137};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=136},137:function(e,n,t){e.exports=t.p+"438099b54d9728b7de4bb345bd4beff4.json"},138:function(e,n,t){var r={"./network/graph_webgpu.json":139};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=138},139:function(e,n,t){e.exports=t.p+"b58f290105b2665e8c6b6411ea06de47.json"},140:function(e,n,t){var r={"./network/kernels_asmjs.js":141};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=140},141:function(e,n,t){e.exports=t.p+"9bf71357b9b3c8e3ea55478a0264cbdb.js"},142:function(e,n,t){var r={"./network/kernels_asmjs.js.mem":143};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=142},143:function(e,n,t){e.exports=t.p+"af56639c65af3cf18ce83cef6dcc7e74.mem"},144:function(e,n,t){var r={"./network/kernels_webassembly.js":145};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=144},145:function(e,n,t){e.exports=t.p+"71794a82a583a619cb2394c50935ab1b.js"},146:function(e,n,t){var r={"./network/kernels_webassembly.wasm":147};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=146},147:function(e,n,t){e.exports=t.p+"b3d83292035ed6326c39d5033ee26954.wasm"},148:function(e,n,t){var r={"./network/kernels_webgpu.metal":149};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=148},149:function(e,n,t){e.exports=t.p+"aa0eddb49577175d412bd2f8ccb35432.metal"},150:function(e,n,t){var r={"./network/weight_webassembly.bin":151};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=150},151:function(e,n,t){e.exports=t.p+"b2c5ec52cafcf2b1032e20bb7eb22d13.bin"},152:function(e,n,t){var r={"./network/weight_webgl_16384.bin":153};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=152},153:function(e,n,t){e.exports=t.p+"33f57604d3da154e9d25fd0bf59e9f91.bin"},154:function(e,n,t){var r={"./network/weight_webgl_4096.bin":155};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=154},155:function(e,n,t){e.exports=t.p+"b2c5ec52cafcf2b1032e20bb7eb22d13.bin"},156:function(e,n,t){var r={"./network/weight_webgl_8192.bin":157};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=156},157:function(e,n,t){e.exports=t.p+"3664c2be37d3b589e67e73629e4b5c84.bin"},158:function(e,n,t){var r={"./network/weight_webgpu.bin":159};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=158},159:function(e,n,t){e.exports=t.p+"cbd338de13235773396476db761c1cc5.bin"},42:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),i=t(1),s=t.n(i),u=t(8),a=t.n(u),c=t(9),f=t.n(c),l=t(5),h=t.n(l),_=t(54),d=t(56),p=t(59),w=t(14),b=t(4),v=t(51);function m(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=h()(e);if(n){var o=h()(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return f()(this,t)}}var g=[{key:"faceid",labels:[""]}],k={input_width:48,input_height:48,order:_.Image.Order.HWC,colorspace:_.Image.Color.RGB,bias:[127.5,127.5,127.5],scale:[127.5,127.5,127.5],task:["classification"],threshold:NaN},y="./network/",O={"graph_webassembly.json":t(130)(y+"graph_webassembly.json"),"graph_webgl_16384.json":t(132)(y+"graph_webgl_16384.json"),"graph_webgl_4096.json":t(134)(y+"graph_webgl_4096.json"),"graph_webgl_8192.json":t(136)(y+"graph_webgl_8192.json"),"graph_webgpu.json":t(138)(y+"graph_webgpu.json"),"kernels_asmjs.js":t(140)(y+"kernels_asmjs.js"),"kernels_asmjs.js.mem":t(142)(y+"kernels_asmjs.js.mem"),"kernels_webassembly.js":t(144)(y+"kernels_webassembly.js"),"kernels_webassembly.wasm":t(146)(y+"kernels_webassembly.wasm"),"kernels_webgpu.metal":t(148)(y+"kernels_webgpu.metal"),"weight_webassembly.bin":t(150)(y+"weight_webassembly.bin"),"weight_webgl_16384.bin":t(152)(y+"weight_webgl_16384.bin"),"weight_webgl_4096.bin":t(154)(y+"weight_webgl_4096.bin"),"weight_webgl_8192.bin":t(156)(y+"weight_webgl_8192.bin"),"weight_webgpu.bin":t(158)(y+"weight_webgpu.bin")},j=function(e){a()(t,e);var n=m(t);function t(e){var r;return o()(this,t),(r=n.call(this,g,k,O,y,e))._eventDispatcher=new w.a,r.tpsCounter=new p.a(17),r}return s()(t,[{key:"_minRestTimeProcess",value:function(e){var n=this,t=e.allData,r=e.frameTimestamp,o=Object(v.a)({allData:t},"face_detector",b.e,void 0,(function(e){return e.faces.length>0})).faces;this._timeProfiling(r);var i=o[0];return this.processImageData(i).then((function(e){return n.runTheNetwork(e).then((function(e){return{type:"face_base",output:e[0]}}))}))}},{key:"_timeProfiling",value:function(e){if(void 0!==this._lastTick){var n=e-this._lastTick,t=1e3/n;this.tpsCounter.enqueue(t);var r=this.tpsCounter.avg();this._eventDispatcher.dispatch("CY_LOG_TPS_NN",{delta_t:n,tps:D(t),avg:D(r,1)})}this._lastTick=e}}]),t}(d.a);function D(e,n){var t=Math.pow(10,n||0);return Math.round(e*t)/t}n.default=j},51:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var r=t(4);function o(e,n){var t=e.allData,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.d,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!0},u=t.find((function(e){return e.type===n}));if(u){var a=i(u);if(null!=a&&s(u,a))return a}throw o}},52:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t(0),o=t.n(r),i=t(1),s=t.n(i),u=function(){function e(n,t){o()(this,e),this._minRestTime=n,this._lastDoneTime=0,this._canSchedule=!0,this._busyReject=t}return s()(e,[{key:"remainingMs",value:function(){return Math.max(0,this._minRestTime-(Date.now()-this._lastDoneTime))}},{key:"canSchedule",value:function(){return this._canSchedule&&0===this.remainingMs()}},{key:"scheduleNext",value:function(e){var n=this;return this.canSchedule()?(this._canSchedule=!1,Promise.resolve(e()).then((function(e){return n.processDone(),e})).catch((function(e){throw n.processDone(),e}))):Promise.reject(this._busyReject)}},{key:"processDone",value:function(){this._canSchedule=!0,this._lastDoneTime=Date.now()}}]),e}()},55:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t(0),o=t.n(r),i=t(1),s=t.n(i),u=function(){function e(n){o()(this,e),this._lastTimestamp=null,this._reject=n}return s()(e,[{key:"push",value:function(e){if(null===this._lastTimestamp)this._lastTimestamp=e;else{if(this._lastTimestamp>e)return Promise.reject(this._reject);this._lastTimestamp=e}}}]),e}()},56:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var r=t(0),o=t.n(r),i=t(1),s=t.n(i),u=t(4),a=t(52),c=t(54),f=t(55),l=function(){function e(n,t,r,i,s){o()(this,e);var c=s.minRestTime,l=s.conf;this._minRestTimeHelper=new a.a(c,u.a),this._frameSequenceChecker=new f.a(u.c),this._labels=n,this._config_params=t,this._networkBasePath=i,this._load_options=l,this._load_options.cacheStrategy="networkOnly",this._load_options.transformUrlDelegate||(this._load_options.transformUrlDelegate=function(e){var n=e.split("/"),t=n[n.length-1];return r[t]})}return s()(e,[{key:"load",value:function(){var e=this;return this._canvas=document.createElement("canvas"),c.load(this._networkBasePath,this._load_options).then((function(n){e._runner=n}))}},{key:"process",value:function(e){var n=this;return this._minRestTimeHelper.scheduleNext((function(){return Promise.resolve().then((function(){return n._frameSequenceChecker.push(e.frameTimestamp)})).then((function(){return n._minRestTimeProcess(e)}))}))}},{key:"_minRestTimeProcess",value:function(){throw"You must implement _minRestTimeProcess"}},{key:"processImageData",value:function(e){return this._drawToCanvas(this._canvas,e),c.Image.getImageArray(this._canvas,{dstW:this._config_params.input_width,dstH:this._config_params.input_height,order:this._config_params.order,color:this._config_params.colorspace,bias:this._config_params.bias,scale:this._config_params.scale}).then((function(e){return e}))}},{key:"_drawToCanvas",value:function(e,n){e.width=n.width,e.height=n.height,e.getContext("2d").putImageData(n,0,0)}},{key:"runTheNetwork",value:function(e){var n=this;return this._runner.getInputViews()[0].set(e),this._runner.run().then((function(){return n.getNetworkOutput()}))}},{key:"getNetworkOutput",value:function(){var e=this._runner.getOutputViews(),n=[];return e.forEach((function(e){n.push(e.toActual())})),n}},{key:"getResultFromNetworkOutput",value:function(e){for(var n={},t=0;t<e.length;t++){var r=e[t],o={};if(this._labels[t].labels)for(var i=0;i<r.length;++i)o[this._labels[t].labels[i]]=r[i];else o=r;n[this._labels[t].key]=o}return n}},{key:"terminate",value:function(){}}]),e}()},59:function(e,n,t){"use strict";t.d(n,"a",(function(){return w}));var r=t(8),o=t.n(r),i=t(9),s=t.n(i),u=t(5),a=t.n(u),c=t(0),f=t.n(c),l=t(1),h=t.n(l);function _(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=a()(e);if(n){var o=a()(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return s()(this,t)}}function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=p(e),r=e.map((function(e){var n=e-t;return n*n})),o=r.reduce((function(e,n){return e+n}),0);return o/=r.length-n,Math.sqrt(o)}function p(e){return e.reduce((function(e,n){return e+n}),0)/e.length}var w=function(e){o()(t,e);var n=_(t);function t(){return f()(this,t),n.apply(this,arguments)}return h()(t,[{key:"avg",value:function(){if(0===this.length)throw new TypeError("Window is empty. Cannot compute average.");return p(this._queue)}},{key:"stddev",value:function(){if(0===this.length)throw new TypeError("Window is empty. Cannot compute standard deviation.");return d(this._queue)}},{key:"sample_stddev",value:function(){if(0===this.length)throw new TypeError("Window is empty. Cannot compute standard deviation.");if(1===this.length)throw new RangeError("Cannot estimate sample standard deviation for only one value.");return d(this._queue,1)}}]),t}(function(){function e(n){if(f()(this,e),!Number.isInteger(n)||n<1)throw new RangeError("Maximum window size must be an integer greater than zero.");this._maxLen=n,this._queue=[]}return h()(e,[{key:"enqueue",value:function(e){if(this._queue.unshift(e),this._queue.length>this._maxLen)return this._queue.pop()}},{key:"length",get:function(){return this._queue.length}}]),e}())}}]);