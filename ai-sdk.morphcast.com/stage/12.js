(window.webpackJsonpCY=window.webpackJsonpCY||[]).push([[12],{162:function(e,n,r){var t={"./network/graph_webassembly.json":163};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=162},163:function(e,n,r){e.exports=r.p+"25f808b78a9582bf39fb337006c2e5be.json"},164:function(e,n,r){var t={"./network/graph_webgl_16384.json":165};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=164},165:function(e,n,r){e.exports=r.p+"cc0285762f2a8c57e9e546c8bfea0293.json"},166:function(e,n,r){var t={"./network/graph_webgl_4096.json":167};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=166},167:function(e,n,r){e.exports=r.p+"310e555a72e5fff48b882571a9f07562.json"},168:function(e,n,r){var t={"./network/graph_webgl_8192.json":169};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=168},169:function(e,n,r){e.exports=r.p+"d804d0157490aa7313778921ba690f9c.json"},170:function(e,n,r){var t={"./network/graph_webgpu.json":171};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=170},171:function(e,n,r){e.exports=r.p+"95dd15fb561c576248910c0d402685a0.json"},172:function(e,n,r){var t={"./network/kernels_asmjs.js":173};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=172},173:function(e,n,r){e.exports=r.p+"99b07107a33f1e74854cb51b9325ca49.js"},174:function(e,n,r){var t={"./network/kernels_asmjs.js.mem":175};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=174},175:function(e,n,r){e.exports=r.p+"6fbb48dbbca0333cc796dc2a5cfba996.mem"},176:function(e,n,r){var t={"./network/kernels_webassembly.js":177};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=176},177:function(e,n,r){e.exports=r.p+"95245a2f1e9723d15c3888f1e9c04962.js"},178:function(e,n,r){var t={"./network/kernels_webassembly.wasm":179};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=178},179:function(e,n,r){e.exports=r.p+"04dd1742b01d52b1c87aac19d7c1d79a.wasm"},180:function(e,n,r){var t={"./network/kernels_webgpu.metal":181};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=180},181:function(e,n,r){e.exports=r.p+"db15ee5307992ecb8f0012896e9b4089.metal"},182:function(e,n,r){var t={"./network/weight_webassembly.bin":183};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=182},183:function(e,n,r){e.exports=r.p+"c62dcea658df2c079738342cae959584.bin"},184:function(e,n,r){var t={"./network/weight_webgl_16384.bin":185};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=184},185:function(e,n,r){e.exports=r.p+"c62dcea658df2c079738342cae959584.bin"},186:function(e,n,r){var t={"./network/weight_webgl_4096.bin":187};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=186},187:function(e,n,r){e.exports=r.p+"c62dcea658df2c079738342cae959584.bin"},188:function(e,n,r){var t={"./network/weight_webgl_8192.bin":189};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=188},189:function(e,n,r){e.exports=r.p+"c62dcea658df2c079738342cae959584.bin"},190:function(e,n,r){var t={"./network/weight_webgpu.bin":191};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=190},191:function(e,n,r){e.exports=r.p+"a2e0caa329655f7bf53d507a0c8a5560.bin"},43:function(e,n,r){"use strict";r.r(n);var t=r(7),o=r.n(t),i=r(3),s=r.n(i),a=r(0),u=r.n(a),c=r(1),f=r.n(c),l=r(8),w=r.n(l),b=r(9),p=r.n(b),d=r(5),_=r.n(d),h=r(2),v=r.n(h),O=r(54),g=r(56),m=r(58),k=r(66),y=r(60),j=r(51),D=r(4);function E(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function N(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?E(Object(r),!0).forEach((function(n){o()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function x(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,t=_()(e);if(n){var o=_()(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return p()(this,r)}}var F=[{key:"emotion",labels:["Angry","Disgust","Fear","Happy","Neutral","Sad","Surprise"]}],U={input_width:48,input_height:48,order:O.Image.Order.HWC,colorspace:O.Image.Color.RGB,bias:[127.5,127.5,127.5],scale:[127.5,127.5,127.5],task:["classification"],threshold:NaN},T="./network/",L={"graph_webassembly.json":r(162)(T+"graph_webassembly.json"),"graph_webgl_16384.json":r(164)(T+"graph_webgl_16384.json"),"graph_webgl_4096.json":r(166)(T+"graph_webgl_4096.json"),"graph_webgl_8192.json":r(168)(T+"graph_webgl_8192.json"),"graph_webgpu.json":r(170)(T+"graph_webgpu.json"),"kernels_asmjs.js":r(172)(T+"kernels_asmjs.js"),"kernels_asmjs.js.mem":r(174)(T+"kernels_asmjs.js.mem"),"kernels_webassembly.js":r(176)(T+"kernels_webassembly.js"),"kernels_webassembly.wasm":r(178)(T+"kernels_webassembly.wasm"),"kernels_webgpu.metal":r(180)(T+"kernels_webgpu.metal"),"weight_webassembly.bin":r(182)(T+"weight_webassembly.bin"),"weight_webgl_16384.bin":r(184)(T+"weight_webgl_16384.bin"),"weight_webgl_4096.bin":r(186)(T+"weight_webgl_4096.bin"),"weight_webgl_8192.bin":r(188)(T+"weight_webgl_8192.bin"),"weight_webgpu.bin":r(190)(T+"weight_webgpu.bin")};var C=function(e){w()(t,e);var n,r=x(t);function t(e){var n,o,i,s;u()(this,t);if((s=r.call(this,F,U,L,T,e))._clipFilterMap=[new y.a({boundAt10Fps:.6,windowLength:3}),new y.a({boundAt10Fps:.6,windowLength:3}),new y.a({boundAt10Fps:.6,windowLength:3}),new y.a({boundAt10Fps:.6,windowLength:3}),new y.a({boundAt10Fps:.6,windowLength:3}),new y.a({boundAt10Fps:.6,windowLength:3}),new y.a({boundAt10Fps:.6,windowLength:3})],s.setSmoothness(null!==(n=e.conf.smoothness)&&void 0!==n?n:.4),s._showRawOutput=null!==(o=e.conf.showRawOutput)&&void 0!==o&&o,s.setCutoffThreshold(null!==(i=e.conf.cutoffThreshold)&&void 0!==i?i:.3),s._enableBalancer=e.conf.enableBalancer||!1,s._enableBalancer){var a=e.conf.balancerWinSize||100,c=e.conf.balancerThreshold||30,f=!1!==e.conf.balancerRedist;s._emotionBalancer=new k.a(a,c,f)}return s}return f()(t,[{key:"setSmoothness",value:function(e){this._useTimeFilters=0!==e;var n=1-e;this._lerp=new m.d(7,{type:m.b.EMA,alphaAt10Fps:n})}},{key:"setCutoffThreshold",value:function(e){this._cutoffThreshold=e}},{key:"_getDominantEmotion",value:function(e){var n,r=(n=e,Object.keys(n).reduce((function(e,r){return n[e]>n[r]?e:r})));if(e[r]>this._cutoffThreshold)return r}},{key:"_minRestTimeProcess",value:(n=s()(v.a.mark((function e(n){var r,t,o,i,s,a,u,c,f,l,w,b,p,d,_,h,O,g,m=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.allData,t=n.frameTimestamp,o=Object(j.a)({allData:r},"face_base",D.e),i=o.output,e.next=4,this.runTheNetwork(i);case 4:return s=e.sent,a=this.getResultFromNetworkOutput(s),u=a.emotion,c=u.Angry,f=u.Disgust,l=u.Fear,w=u.Happy,b=u.Neutral,p=u.Sad,d=u.Surprise,_=[c,f,l,w,b,p,d].map((function(e,n){return m._clipFilterMap[n].next(e,t)})),h=this._lerp.next(_,t),O={Angry:h[0],Disgust:h[1],Fear:h[2],Happy:h[3],Neutral:h[4],Sad:h[5],Surprise:h[6]},this._enableBalancer&&(O=this._emotionBalancer.next(O)),g=this._useTimeFilters?O:u,e.abrupt("return",{type:"face_emotion",output:N({dominantEmotion:this._getDominantEmotion(g),emotion:g},this._showRawOutput?{rawEmotion:u}:{}),private:{rawEmotion:u}});case 14:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),t}(g.a);n.default=C}}]);